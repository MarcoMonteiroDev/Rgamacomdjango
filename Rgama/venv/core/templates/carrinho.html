{% extends 'base.html' %}
{% load static %}

{% block content %}

<h2>Seu Carrinho</h2>

<form method="post" action="{% url 'atualizar_quantidade' %}">
  {% csrf_token %}
  <table>
    <tr>
      <th>Produto</th>
      <th>Quantidade</th>
      <th>Subtotal</th>
      <th>Imagem</th>
      <th>Remover</th>
    </tr>

    {% for produto_id, item in carrinho.items %}
      <tr>
        <td>{{ item.nome }}</td>
        <td>
          <input type="number" name="quantidade_{{ produto_id }}" value="{{ item.quantidade }}" min="1">
        </td>
        <td>R$ {{ item.subtotal }}</td>
        <td><img src="{{ item.imagem }}" alt="" width="80"></td>
        <td>
          <a href="#" onclick="removerDoCarrinho('{{ produto_id }}')">Remover</a>
        </td>
      </tr>
      {% endfor %}
    </table>
    
    <button type="submit">Atualizar e Finalizar</button>
  </form>
  
  <!-- FormulÃ¡rio oculto -->
  <form id="remover-form" method="post" style="display:none;">
    {% csrf_token %}
  </form>
{% endblock %}